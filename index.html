<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Status de Proposta</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: White;
            color: #333;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: White;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            background: #000;
            color: white;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        h2 {
            color: #000;
            border-bottom: 2px solid #b21f1f;
            padding-bottom: 10px;
            margin: 25px 0 15px;
        }
        
        .card {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #1a2a6c;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        input:focus, select:focus {
            border-color: #000;
            outline: none;
            box-shadow: 0 0 5px #000;
        }
        
        .btn {
            background: #000;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn i {
            margin-right: 8px;
        }
        
        .proposal-list {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .proposal-list th {
            background: #000;
            color: white;
            padding: 15px;
            text-align: left;
        }
        
        .proposal-list td {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .proposal-list tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .proposal-list tr:hover {
            background-color: white;
        }
        
        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
            text-align: center;
            display: inline-block;
        }
        
        .status-elaboracao {
            background-color: #ffeb3b;
            color: #000;
        }
        
        .status-aprovacao {
            background-color: #f1a10e;
            color: #000;
        }
        
        .status-aprovado {
            background-color: #4caf50;
            color: #000;
        }
        
        .status-cancelado {
            background-color: #f44336;
            color: #000;
        }
        
        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            margin: 0 5px;
            transition: all 0.3s ease;
        }
        
        .edit-btn {
            color: #1a2a6c;
        }
        
        .delete-btn {
            color: #b21f1f;
        }
        
        .action-btn:hover {
            transform: scale(1.2);
        }
        
        .markdown-container {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #dee2e6;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .download-btn {
            margin-top: 20px;
            background: linear-gradient(to right, #4caf50, #2e7d32);
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: white;
            margin-top: 30px;
            font-size: 0.9rem;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transform: translateX(200%);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            background: linear-gradient(to right, #4caf50, #2e7d32);
        }
        
        .notification.error {
            background: linear-gradient(to right, #f44336, #b71c1c);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .proposal-list {
                font-size: 0.9rem;
            }
            
            .proposal-list th, .proposal-list td {
                padding: 10px;
            }
        }
    </style>
	
	<!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAhue_2qisBA2Ihe6WPKfonf0NSE4WZnPg",
      authDomain: "gera-propostas.firebaseapp.com",
      projectId: "gera-propostas",
      storageBucket: "gera-propostas.firebasestorage.app",
      messagingSenderId: "517918747792",
      appId: "1:517918747792:web:568b86b22e0e5709823c15",
      measurementId: "G-CJCK09C7D8"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>
</head>
<body>
    <div class="container">
        <header>
		 <h1><i class="fas fa-file-contract"></i> Gerador de Propostas</h1>
            <p>Gerencie suas propostas e gere relatÃ³rios em Markdown</p>
        </header>
        
        <div class="card">
            <h2><i class="fas fa-plus-circle"></i> Adicionar Nova Proposta</h2>
            <div class="form-group">
                <label for="proposal-title">TÃ­tulo da Proposta</label>
                <input type="text" id="proposal-title" placeholder="Digite o tÃ­tulo da proposta">
            </div>
            
            <div class="form-group">
                <label for="proposal-link">Link da Proposta</label>
                <input type="text" id="proposal-link" placeholder="https://exemplo.com/proposta">
            </div>
            
            <div class="form-group">
                <label for="proposal-status">Status da Proposta</label>
                <select id="proposal-status">
                    <option value="elaboracao">ðŸŸ¡Em elaboraÃ§Ã£o</option>
                    <option value="aprovacao">ðŸŸ Em aprovaÃ§Ã£o do cliente</option>
                    <option value="aprovado">ðŸŸ¢Aprovado</option>
                    <option value="cancelado">ðŸ”´Cancelado</option>
                </select>
            </div>
            
            <button id="add-proposal" class="btn">
                <i class="fas fa-save"></i> Salvar Proposta
            </button>
        </div>
        
        <div class="card">
            <h2><i class="fas fa-list"></i> Lista de Propostas</h2>
            <table class="proposal-list">
                <thead>
                    <tr>
                        <th>TÃ­tulo</th>
                        <th>Status</th>
                        <th>AÃ§Ãµes</th>
                    </tr>
                </thead>
                <tbody id="proposals-list">
                    <!-- As propostas serÃ£o inseridas aqui via JavaScript -->
                </tbody>
            </table>
        </div>
        
        <div class="card">
            <h2><i class="fab fa-markdown"></i> Tabela Markdown Gerada</h2>
            <p>Esta tabela serÃ¡ atualizada automaticamente conforme as propostas sÃ£o adicionadas ou editadas.</p>
            
            <div class="markdown-container" id="markdown-output">
                <!-- O Markdown serÃ¡ gerado aqui -->
            </div>
            
            <button id="download-md" class="btn download-btn">
                <i class="fas fa-download"></i> Baixar Markdown
            </button>
        </div>
    </div>
    
    <footer>
        Developed by Rodrigo Moreira
    </footer>
    
    <div class="notification" id="notification"></div>

    <script>
        // Banco de dados local (simulado)
        let proposals = JSON.parse(localStorage.getItem('proposals')) || [];
        
        // Elementos DOM
        const proposalTitleInput = document.getElementById('proposal-title');
        const proposalLinkInput = document.getElementById('proposal-link');
        const proposalStatusSelect = document.getElementById('proposal-status');
        const addProposalBtn = document.getElementById('add-proposal');
        const proposalsList = document.getElementById('proposals-list');
        const markdownOutput = document.getElementById('markdown-output');
        const downloadBtn = document.getElementById('download-md');
        const notification = document.getElementById('notification');
        
        // FunÃ§Ã£o para mostrar notificaÃ§Ã£o
        function showNotification(message, isSuccess = true) {
            notification.textContent = message;
            notification.className = isSuccess ? 'notification success show' : 'notification error show';
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // FunÃ§Ã£o para renderizar a lista de propostas
        function renderProposals() {
            proposalsList.innerHTML = '';
            
            if (proposals.length === 0) {
                proposalsList.innerHTML = `
                    <tr>
                        <td colspan="3" style="text-align: center; padding: 30px;">
                            <i class="fas fa-inbox" style="font-size: 3rem; color: #ccc; margin-bottom: 15px;"></i>
                            <p>Nenhuma proposta cadastrada ainda.</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            proposals.forEach((proposal, index) => {
                let statusClass = '';
                let statusText = '';
                
                switch(proposal.status) {
                    case 'elaboracao':
                        statusClass = 'status-elaboracao';
                        statusText = 'ðŸŸ¡ Em ElaboraÃ§Ã£o';
                        break;
                    case 'aprovacao':
                        statusClass = 'status-aprovacao';
                        statusText = 'ðŸŸ  Em AprovaÃ§Ã£o do Cliente';
                        break;
                    case 'aprovado':
                        statusClass = 'status-aprovado';
                        statusText = 'ðŸŸ¢ Aprovado';
                        break;
                    case 'cancelado':
                        statusClass = 'status-cancelado';
                        statusText = 'ðŸ”´ Cancelado';
                        break;
                }
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${proposal.title}</td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    <td>
                        <button class="action-btn edit-btn" onclick="editProposal(${index})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="action-btn delete-btn" onclick="deleteProposal(${index})">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </td>
                `;
                
                proposalsList.appendChild(row);
            });
            
            // Atualiza o Markdown
            generateMarkdown();
        }
        
        // FunÃ§Ã£o para adicionar uma nova proposta
        function addProposal() {
            const title = proposalTitleInput.value.trim();
            const link = proposalLinkInput.value.trim();
            const status = proposalStatusSelect.value;
            
            if (!title) {
                showNotification('Por favor, insira um tÃ­tulo para a proposta!', false);
                return;
            }
            
            const newProposal = {
                id: Date.now(), // ID Ãºnico baseado no timestamp
                title,
                link,
                status
            };
            
            proposals.push(newProposal);
            localStorage.setItem('proposals', JSON.stringify(proposals));
            
            // Limpa os campos
            proposalTitleInput.value = '';
            proposalLinkInput.value = '';
            proposalStatusSelect.value = 'elaboracao';
            
            showNotification('Proposta adicionada com sucesso!');
            renderProposals();
        }
        
        // FunÃ§Ã£o para editar uma proposta
        function editProposal(index) {
            const proposal = proposals[index];
            
            // Preenche o formulÃ¡rio com os dados da proposta
            proposalTitleInput.value = proposal.title;
            proposalLinkInput.value = proposal.link;
            proposalStatusSelect.value = proposal.status;
            
            // Remove a proposta da lista
            proposals.splice(index, 1);
            localStorage.setItem('proposals', JSON.stringify(proposals));
            
            showNotification('Proposta carregada para ediÃ§Ã£o!');
            renderProposals();
        }
        
        // FunÃ§Ã£o para excluir uma proposta
        function deleteProposal(index) {
            if (confirm('Tem certeza que deseja excluir esta proposta?')) {
                proposals.splice(index, 1);
                localStorage.setItem('proposals', JSON.stringify(proposals));
                showNotification('Proposta excluÃ­da com sucesso!');
                renderProposals();
            }
        }
        
        // FunÃ§Ã£o para gerar a tabela em Markdown
        function generateMarkdown() {
            if (proposals.length === 0) {
                markdownOutput.textContent = '## Nenhuma proposta cadastrada';
                return;
            }
            
            let markdown = '## Lista de Propostas\n\n';
            markdown += '| TÃ­tulo | Status | Link |\n';
            markdown += '|--------|--------|------|\n';
            
            proposals.forEach(proposal => {
                let statusText = '';
                
                switch(proposal.status) {
                    case 'elaboracao':
                        statusText = 'Em elaboraÃ§Ã£o';
                        break;
                    case 'aprovacao':
                        statusText = 'Em aprovaÃ§Ã£o do cliente';
                        break;
                    case 'aprovado':
                        statusText = 'Aprovado';
                        break;
                    case 'cancelado':
                        statusText = 'Cancelado';
                        break;
                }
                
                markdown += `| ${proposal.title} | ${statusText} | [Link](${proposal.link}) |\n`;
            });
            
            markdownOutput.textContent = markdown;
        }
        
        // FunÃ§Ã£o para baixar o Markdown
        function downloadMarkdown() {
            if (proposals.length === 0) {
                showNotification('NÃ£o hÃ¡ propostas para exportar!', false);
                return;
            }
            
            const content = markdownOutput.textContent;
            const blob = new Blob([content], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'propostas.md';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('Markdown baixado com sucesso!');
        }
        
        // Event Listeners
        addProposalBtn.addEventListener('click', addProposal);
        downloadBtn.addEventListener('click', downloadMarkdown);
        
        // Inicializa a aplicaÃ§Ã£o
        document.addEventListener('DOMContentLoaded', renderProposals);
        
        // Adiciona suporte para pressionar Enter no tÃ­tulo
        proposalTitleInput.addEventListener('keyup', (e) => {
            if (e.key === 'Enter') {
                addProposal();
            }
        });
        
        // Expor funÃ§Ãµes para o escopo global (para os botÃµes de aÃ§Ã£o)
        window.editProposal = editProposal;
        window.deleteProposal = deleteProposal;
    </script>
</body>
</html>
